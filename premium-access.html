<!doctype html>
<html lang="en" data-theme="light">
<head>
  <!--
    The AI Artisan ‚Äî Premium Edition (Access Gateway)
    Corrected & production-ready premium-access.html
    Author: Abdullah Khan ¬∑ HQAIM Studios
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premium Access ‚Äî The AI Artisan (Unlock)</title>
  <meta name="description" content="Unlock Premium modules for The AI Artisan. Enter your purchased password to gain access." />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="icon" href="https://aiartisan.hqaim.com/images/favicon.ico" type="image/x-icon" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Serif+Pro:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* Minimal duplicate of your Diamond Edition tokens to match visual style */
    :root{color-scheme:light dark; --font-sans:'Inter',system-ui,sans-serif; --font-serif:'Source Serif Pro',serif; --violet:#7c3aed; --blue:#2563eb; --gold:#f59e0b; --white:#ffffff; --black:#0f172a; --slate-50:#f8fafc; --slate-700:#334155; --slate-900:#0f172a; --bg:var(--white); --surface:var(--slate-50); --text:var(--slate-900); --muted:#445268; --border:#e6eef8; --accent:var(--violet); --wrap:1000px; --pad:1.5rem; --r:12px; --shadow-e2:0 8px 20px rgba(15,23,42,.08), 0 3px 8px rgba(15,23,42,.06);} 
    html[data-theme="dark"]{--bg:var(--slate-900);--surface:#111827;--text:#f8fafc;--muted:#9aa6bf;--border:#1f2937;--accent:#a78bfa}
    *{box-sizing:border-box}body{margin:0;font-family:var(--font-sans);background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
    .wrap{max-width:var(--wrap);margin:0 auto;padding:0 var(--pad)}
    .site-header{position:sticky;top:0;z-index:100;backdrop-filter:saturate(140%) blur(12px);background:color-mix(in srgb,var(--surface) 92%,transparent);border-bottom:1px solid var(--border)}
    .header-inner{max-width:var(--wrap);margin:0 auto;padding:.75rem var(--pad);display:flex;align-items:center;justify-content:space-between}
    .brand-wrap{display:inline-flex;align-items:center;gap:10px;text-decoration:none;color:var(--text)}
    .brand-logo{width:32px;height:32px}
    .brand-text{font-weight:800;background:linear-gradient(95deg,var(--accent),var(--blue));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
    .main-nav ul{list-style:none;margin:0;padding:0;display:flex;gap:10px}
    .main-nav a{color:var(--muted);text-decoration:none;font-weight:600;padding:6px 10px;border-radius:8px}
    .main-nav a[aria-current="page"],.main-nav a:hover{color:var(--accent);background-color:color-mix(in srgb,var(--accent) 10%,transparent)}
    .theme-toggle{width:40px;height:40px;border-radius:50%;border:1px solid var(--border);background:var(--surface);display:grid;place-items:center;cursor:pointer}
    .nav-toggle{display:none}
    @media(max-width:900px){.nav-toggle{display:block}.main-nav{display:none}.main-nav.open{display:block}}

    /* Hero small spacer so header doesn't overlap */
    .hero-spacer{height:36px}

    main#main{padding:1.5rem var(--pad) 4rem}

    /* Enhanced Unlock Box */
    .enhanced-unlock{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:2.5rem 2rem;margin:2.5rem auto;max-width:640px;box-shadow:var(--shadow-e2);}
    .unlock-title{font-family:var(--font-serif);font-size:1.4rem;margin-bottom:.5rem}
    .unlock-description{color:var(--muted);margin-bottom:1rem}
    .unlock-label{display:block;text-align:left;color:var(--muted);font-size:.85rem;margin-bottom:6px;font-weight:600}
    .enhanced-unlock-input{width:100%;padding:.85rem 1rem;border-radius:12px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:1rem}
    .enhanced-unlock-btn{margin-top:1rem;width:100%;padding:.9rem 1.25rem;font-size:1rem;border-radius:12px;border:1px solid var(--accent);background:color-mix(in srgb,var(--accent) 12%,var(--surface));color:var(--accent);font-weight:700;cursor:pointer}
    .enhanced-unlock-btn:hover{transform:translateY(-2px)}
    .unlock-error{margin-top:1rem;color:#ef4444;font-size:0.95rem;display:none}
    .unlock-success{margin-top:1rem;color:#10b981;font-size:0.95rem;display:none}

    .back-to-top{position:fixed;bottom:26px;right:26px;width:48px;height:48px;border-radius:50%;border:1px solid var(--border);display:grid;place-items:center;color:var(--accent);background:var(--surface);box-shadow:var(--shadow-e2);opacity:0;visibility:hidden;transition:opacity .18s,transform .18s;z-index:90}
    .back-to-top.visible{opacity:1;visibility:visible}

    .footer-section{margin-top:32px;border-top:1px solid var(--border);background:var(--surface)}
    .site-footer{padding:0 var(--pad) 16px;max-width:var(--wrap);margin:0 auto;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
    .footer-nav{display:flex;gap:16px}
    .footer-nav a{color:var(--muted);text-decoration:none}

    @media (max-width:560px){.header-inner,.wrap{padding-left:1rem;padding-right:1rem}.site-footer{flex-direction:column;gap:8px}}
  </style>
</head>
<body>
  <a class="skip-link" href="#main" style="position:absolute;left:12px;top:6px;z-index:200;background:var(--surface);color:var(--text);padding:6px 10px;border-radius:8px;border:1px solid var(--border);transform:translateY(-150%);">Skip to content</a>

  <!-- Header (Exact look & links preserved) -->
  <header class="site-header" role="banner">
    <div class="header-inner">
      <a class="brand-wrap" href="/index.html" aria-label="The AI Artisan home">
        <img src="https://aiartisan.hqaim.com/images/HQAIM_ICON.svg" class="brand-logo" alt="HQAIM Studios icon" width="32" height="32" />
        <span class="brand-text">The AI Artisan</span>
      </a>
      <nav class="main-nav" role="navigation" aria-label="Main">
        <ul>
          <li><a href="/foreword.html">Foreword</a></li>
          <li><a href="/toc.html">Index</a></li>
          <li><a href="/modules.html">Modules</a></li>
          <li><a href="/fieldkit.html">Toolkit</a></li>
          <li><a href="/premium.html" aria-current="page">Premium</a></li>
          <li><a href="/contact.html">Contact</a></li>
        </ul>
      </nav>

      <div style="display:flex;align-items:center;gap:10px">
        <button id="themeToggle" class="theme-toggle" aria-label="Toggle color theme" aria-pressed="false" title="Toggle theme">
          <svg class="icon icon-sun" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path></svg>
          <svg class="icon icon-moon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" style="display:none"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
        </button>
      </div>
    </div>
  </header>

  <div class="hero-spacer"></div>

  <main id="main" role="main" tabindex="-1" class="wrap">

    <!-- Lead-in message -->
    <div style="max-width:900px;margin:0 auto;text-align:center;padding-top:10px;">
      <h1 style="font-family:var(--font-serif);font-size:1.6rem;margin:0 0 .5rem;">Premium Access ‚Äî Unlock Your Modules</h1>
      <p style="color:var(--muted);margin:0 0 1rem;">Enter the Premium password you purchased. Access is granted instantly when the password is correct.</p>
    </div>

    <!-- ENHANCED UNLOCK BOX -->
    <div class="enhanced-unlock">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
        <div style="font-size:1.6rem">üîê</div>
        <div>
          <div class="unlock-title">Premium Access Unlock</div>
          <div class="unlock-description">Enter your Premium password to unlock the modules landing page.</div>
        </div>
      </div>

      <label for="premiumPassword" class="unlock-label">Password</label>
      <input id="premiumPassword" type="password" class="enhanced-unlock-input" placeholder="Enter Premium Password" autocomplete="off" />

      <button id="unlockBtn" class="enhanced-unlock-btn" onclick="unlockPremium()">Unlock Now</button>

      <p id="unlockError" class="unlock-error">Incorrect password. Please try again or contact support.</p>
      <p id="unlockSuccess" class="unlock-success">‚úî Access granted ‚Äî redirecting‚Ä¶</p>

      <div style="margin-top:1rem;text-align:center;color:var(--muted);font-size:.95rem">
        <span style="display:inline-block;margin-top:8px">Need help? <a href="mailto:support@hqaim.com" style="color:var(--accent);text-decoration:underline">support@hqaim.com</a></span>
      </div>
    </div>

    <!-- Small footer note -->
    <div style="text-align:center;margin-top:1.5rem;color:var(--muted);font-size:0.95rem">After unlocking you'll be redirected to the modules landing page. Links expire automatically for security.</div>

  </main>

  <!-- Back to Top -->
  <button id="backToTop" class="back-to-top" aria-label="Back to top" title="Back to top">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
  </button>

  <!-- Footer -->
  <footer class="footer-section" role="contentinfo">
    <div class="site-footer">
      <nav class="footer-nav" aria-label="Footer">
        <a href="/toc.html">Index</a>
        <a href="/contact.html">Contact</a>
        <a href="/privacy.html">Privacy</a>
        <a href="/terms.html">Terms</a>
        <a href="/sitemap.xml">Sitemap</a>
      </nav>
      <div style="display:flex;align-items:center;gap:10px">
        <img src="https://aiartisan.hqaim.com/assets/images/HQAIM_LOGO_Gradient_Minimal.svg" alt="HQAIM Studios" style="height:26px" />
        <div style="color:var(--muted);font-size:0.95rem">¬© <span id="year"></span> Abdullah Khan ¬∑ HQAIM Studios</div>
      </div>
    </div>
  </footer>

  <script>
  (function(){
    'use strict';
    // Theme toggle / initial state
    const html = document.documentElement;
    const metaTheme = document.getElementById('themeColor');
    const toggle = document.getElementById('themeToggle');
    const backToTop = document.getElementById('backToTop');
    const navToggle = document.querySelector('.nav-toggle');
    const mainNav = document.querySelector('nav.main-nav');
    const yearEl = document.getElementById('year');
    if(yearEl) yearEl.textContent = new Date().getFullYear();

    const storageKey = 'aiartisan_theme_preference';
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    function getPref(){ const saved = localStorage.getItem(storageKey); if(saved==='light'||saved==='dark') return saved; return prefersDark.matches ? 'dark' : 'light'; }
    function applyTheme(t){ html.dataset.theme = t; const sun = document.querySelector('.icon-sun'); const moon = document.querySelector('.icon-moon'); if(sun) sun.style.display = t==='light'? 'inline' : 'none'; if(moon) moon.style.display = t==='dark'? 'inline' : 'none'; if(toggle) toggle.setAttribute('aria-pressed', String(t==='dark')); }
    applyTheme(getPref());
    prefersDark.addEventListener('change', e => { if(!localStorage.getItem(storageKey)) applyTheme(e.matches ? 'dark' : 'light'); });
    if(toggle){ toggle.addEventListener('click', ()=>{ const next = html.dataset.theme === 'dark' ? 'light' : 'dark'; localStorage.setItem(storageKey, next); applyTheme(next); }); }

    if(navToggle && mainNav){ navToggle.addEventListener('click', ()=>{ const expanded = navToggle.getAttribute('aria-expanded') === 'true'; navToggle.setAttribute('aria-expanded', String(!expanded)); mainNav.classList.toggle('open'); }); }

    if(backToTop){ window.addEventListener('scroll', ()=>{ if(window.scrollY>400) backToTop.classList.add('visible'); else backToTop.classList.remove('visible'); }); backToTop.addEventListener('click', ()=>{ window.scrollTo({ top: 0, behavior: 'smooth' }); }); }
  })();
  </script>

  <!-- Corrected unlock function: hardcoded key (modules/index.html) & improved UX -->
  <script>
  async function unlockPremium() {
    const input = document.getElementById("premiumPassword");
    const password = input.value.trim();

    const errorEl = document.getElementById('unlockError');
    const successEl = document.getElementById('unlockSuccess');
    if(errorEl) errorEl.style.display = 'none';
    if(successEl) successEl.style.display = 'none';

    if (!password) {
      if(errorEl){ errorEl.textContent = 'Please enter the password.'; errorEl.style.display = 'block'; }
      return;
    }

    const key = 'modules/index.html'; // always unlock modules landing page

    try {
      const res = await fetch('https://ighfktyhwl.execute-api.us-east-1.amazonaws.com/default/AIArtisanPresignFunction', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ password, key })
      });

      if (!res.ok) {
        if(errorEl){ errorEl.textContent = 'Incorrect password. Please try again.'; errorEl.style.display = 'block'; }
        return;
      }

      const data = await res.json();
      if (!data || !data.url) {
        alert('Unexpected response from server. Contact support.');
        return;
      }

      if(successEl){ successEl.style.display = 'block'; }
      // Small delay so user sees success
      setTimeout(()=>{ window.location.href = data.url; }, 700);

    } catch (err) {
      console.error(err);
      if(errorEl){ errorEl.textContent = 'Network error ‚Äî check console or try again.'; errorEl.style.display = 'block'; }
    }
  }
  </script>
</body>
</html>
